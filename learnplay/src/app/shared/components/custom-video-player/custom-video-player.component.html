<div #videoPlayer class="block relative w-full aspect-video bg-black rounded-2xl overflow-hidden" (keydown)="onKeyDown($event)" tabindex="0">
  <!-- YouTube Player Container -->
  <div #playerContainer class="w-full h-full"></div>
  
  <!-- Top overlay to hide title and copy link -->
  <div class="absolute top-0 left-0 w-full bg-black z-30 pointer-events-auto transition-all duration-300"
       [class.h-14]="!hasEnded"
       [class.sm:h-16]="!hasEnded"
       [class.h-full]="hasEnded"></div>
  
  <!-- Bottom overlay to hide more videos -->
  <div class="absolute bottom-0 left-0 w-full bg-black z-30 pointer-events-auto transition-all duration-300"
       [class.h-10]="(!isPaused && !hasEnded) && !delayedOverlayResize && !isFullscreen"
       [class.sm:h-12]="(!isPaused && !hasEnded) && !delayedOverlayResize && !isFullscreen"
       [class.h-16]="(!isPaused && !hasEnded) && !delayedOverlayResize && isFullscreen"
       [class.sm:h-20]="(!isPaused && !hasEnded) && !delayedOverlayResize && isFullscreen"
       [class.md:h-24]="(!isPaused && !hasEnded) && !delayedOverlayResize && isFullscreen"
       [class.lg:h-28]="(!isPaused && !hasEnded) && !delayedOverlayResize && isFullscreen"
       [class.h-1/1]="(isPaused && !hasEnded) || delayedOverlayResize"
       [class.h-full]="hasEnded"></div>
  
  <!-- Complete overlay when ended -->
  <div *ngIf="hasEnded" 
       class="absolute inset-0 bg-black z-60 pointer-events-auto"></div>
  
  <!-- Pause overlay -->
  <div *ngIf="isPaused" 
       class="absolute inset-0 bg-black/90 flex items-center justify-center z-40"
       (click)="$event.stopPropagation()">
    <button 
      (click)="togglePlayPause()"
      class="w-16 h-16 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all">
      <svg class="w-8 h-8 text-white ml-1" fill="currentColor" viewBox="0 0 24 24">
        <path d="M8 5v14l11-7z"/>
      </svg>
    </button>
  </div>
  
  <!-- End overlay -->
  <div *ngIf="hasEnded" 
       class="absolute inset-0 bg-black flex flex-col items-center justify-center z-70"
       (click)="$event.stopPropagation()">
    <button 
      (click)="replay()"
      class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center hover:bg-white/30 transition-all mb-4">
      <svg class="w-10 h-10 text-white" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
      </svg>
    </button>
    <span class="text-white text-xl font-medium">Replay Video</span>
  </div>
  
  <!-- Custom Controls -->
  <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4 z-50"
       [class.opacity-0]="isPlaying && !showControls"
       [class.opacity-100]="!isPlaying || showControls"
       (mouseenter)="showControlsTemporarily()"
       (click)="$event.stopPropagation()">
    
    <div class="flex items-center gap-4">
      <button (click)="togglePlayPause()" class="text-white hover:text-gray-300">
        <svg *ngIf="!isPlaying" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 5v14l11-7z"/>
        </svg>
        <svg *ngIf="isPlaying" class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>
        </svg>
      </button>
      
      <div class="flex-1 h-1 bg-white/30 rounded-full cursor-pointer" (click)="seekTo($event)">
        <div class="h-full bg-white rounded-full transition-all" [style.width.%]="progress"></div>
      </div>
      
      <span class="text-white text-sm">{{ formatTime(currentTime) }} / {{ formatTime(duration) }}</span>
      
      <button (click)="toggleFullscreen()" class="text-white hover:text-gray-300">
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
          <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
        </svg>
      </button>
    </div>
  </div>
</div>